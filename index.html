<html>
  <head>
<title>D&D 5e App</title>
<script src="/socket.io/socket.io.js"></script>
<script src="dicerolls.js"></script>
<script src="chatcommands.js"></script>
<script src="CharacterCommands.js"></script>

<script>
var LocalResultList = [];

var versionNumber = 0.26;
console.log("API Ready v" + versionNumber)
var socket = io.connect();
socket.on('20DiceResult', function(msg){
	updateResultList(msg);
});
socket.on('sidedDiceResult', function(msg){
	updateResultList(msg);
});

function hideAll(){
	document.getElementById('Main').style.visibility = 'hidden';
	document.getElementById('DiceMain').style.visibility = 'hidden';
	document.getElementById('CharacterStatsMenu').style.visibility = 'hidden';
	document.getElementById('CharacterSheet').style.visibility = 'hidden';
}
function showScreen(screen){
	hideAll();
	document.getElementById(screen).style.visibility = 'visible';
}

function Login(){
	MyCharacter.CName = document.getElementById('CharacterName').value;
	MyCharacter.PName = document.getElementById('PlayerName').value;
	document.getElementById('Login').style.visibility = 'hidden';
	showScreen('CharacterSheet');
	document.getElementById('CharacterSheetButton').style.visibility = 'visible';
}

function loadCharacter(){
	MyCharacter = JSON.parse(document.getElementById('loadCharacterInput').value);
	document.getElementById('Login').style.visibility = 'hidden';
	showScreen('DiceMain');
	document.getElementById('MainScreenButton').style.visibility = 'visible';
	document.getElementById('CharacterStatsButton').style.visibility = 'visible';
	document.getElementById('CharacterSheetButton').style.visibility = 'hidden';
	UpdateStats();
}

function saveCharacter(){
	console.log(JSON.stringify(MyCharacter));
	document.getElementById('SaveString').value = JSON.stringify(MyCharacter);
}
</script>
</head>

<body>
<nav id="nav" style="background-color:#00004d; position:absolute; left:0px; top:0px; height:100%; width:75px; float:left;">
  <p><button id="MainScreenButton" onclick="showScreen('DiceMain')" style="visibility:hidden">Dice</button></p>
  <p><button id="CharacterSheetButton" onclick="showScreen('CharacterSheet')" style="visibility:hidden">Character Sheet</button></p>
  <p><button id="CharacterStatsButton" onclick="showScreen('CharacterStatsMenu')" style="visibility:hidden">Stats</button></p>
</nav>

<div id="Login" style="height:100%; width:300px; position:absolute; top:0px; left:75px; background-color:#BEC6DD; visibility:visible;">
    <button id="loadCharacter" onclick="loadCharacter()">Import Character</button><input type="text" id="loadCharacterInput" size="5"><br>
    Character Name: <input type="text" id="CharacterName" value="Bitchkylt" size="5"><br>
	Player Name: <input type="text" id="PlayerName" value="Player Name" size="5"><br>
	<button id="Login" onclick="Login()">Login</button>
</div>

<div id="Main" style="height:100%; width:300px; position:absolute; top:0px; left:75px; background-color:#BEC6DD; visibility:hidden;">

	<div id="DiceMain" style="height:100%; width:300px; position:absolute; top:0px; left:0px; background-color:#BEC6DD; visibility:hidden;">
		<div id="AdvDisMain" style="height:40px; width:300px; background-color:#BEC6DD; position: absolute; top:0px; left:0px; overflow: auto;">
			<input type="radio" name="adv" id="RadioAdv" value="Adv"> Advantage
			<input type="radio" name="adv" id="RadioDis" value="Dis"> Disadvantage
			<button id="ClearAdvDis" onclick="ClearAdvDis()">Clear</button>
			<hr>
		</div>
		<div id="DiceMod" style="height:40px; width:300px; background-color#BEC6DD; position:absolute; top:40px; left:0px;">
		<input type="text" id="rollMod" size="1">Modifier to the Next Roll
		<hr>
		</div>
		<div id="DiceMain" style="height:135px; width:300px; background-color#BEC6DD; position:absolute; top:80px; left:0px;">
			1d20 + <input type="text" id="d20P" size="1">
			<button id="rolld20" onclick="rollSkill(document.getElementById('d20P').value, 'd20')">Roll</button><br>
			<input type="text" id="d12" size="1">d12 + <input type="text" id="d12P" size="1">
			<button id="rolld12" onclick="rollSidedDice(12, Number(document.getElementById('d12P').value), document.getElementById('d12').value, 'd12')">Roll</button><br>
			<input type="text" id="d10" size="1">d10 + <input type="text" id="d10P" size="1">
			<button id="rolld10" onclick="rollSidedDice(10, Number(document.getElementById('d10P').value), document.getElementById('d10').value, 'd10')">Roll</button><br>
			<input type="text" id="d8" size="1">d8 + <input type="text" id="d8P" size="1">
			<button id="rolld8" onclick="rollSidedDice(8, Number(document.getElementById('d8P').value), document.getElementById('d8').value, 'd8')">Roll</button><br>
			<input type="text" id="d6" size="1">d6 + <input type="text" id="d6P" size="1">
			<button id="rolld6" onclick="rollSidedDice(6, Number(document.getElementById('d6P').value), document.getElementById('d6').value, 'd6')">Roll</button><br>
			<input type="text" id="d4" size="1">d4 + <input type="text" id="d4P" size="1">
			<button id="rolld4" onclick="rollSidedDice(4, Number(document.getElementById('d4P').value), document.getElementById('d4').value, 'd4')">Roll</button><br>
		</div>
		<div id="SavingThrowsButtonsMain" style="height:100%; width:150px; background-color#BEC6DD; position:absolute; top:265px; left:0px; overflow:auto;">
			<button id="STRRoll" onclick="rollSkill(MyCharacter.STRP(), 'Strength')">Strength</button><br>
			<button id="DEXRoll" onclick="rollSkill(MyCharacter.DEXP(), 'Dexterity')">Dexterity</button><br>
			<button id="CONRoll" onclick="rollSkill(MyCharacter.CONP(), 'Constitution')">Constitution</button><br>
			<button id="INTRoll" onclick="rollSkill(MyCharacter.INTP(), 'Intelligence')">Intelligence</button><br>
			<button id="WISRoll" onclick="rollSkill(MyCharacter.WISP(), 'Wisdom')">Wisdom</button><br>
			<button id="CHARoll" onclick="rollSkill(MyCharacter.CHAP(), 'Charisma')">Charisma</button><br>
		</div>

		<div id="SkillButtonsMain" style="height:100%; width:150px; background-color:#BEC6DD; position: absolute; top:265px; left:150px; overflow: auto;">
			<button id="rollAcrobatics" onclick="rollSkill(MyCharacter.Acrobatics(), 'Acrobatics')">Acrobatics</button><br>
			<button id="rollAnimalHandling" onclick="rollSkill(MyCharacter.AnimalHandling(), 'Animal Handling')">AnimalHandling</button><br>
			<button id="rollArcana" onclick="rollSkill(MyCharacter.Arcana(), 'Arcana')")">Arcana</button><br>
			<button id="rollAthletics" onclick="rollSkill(MyCharacter.Athletics(), 'Athletics')">Athletics</button><br>
			<button id="rollDeception" onclick="rollSkill(MyCharacter.Deception(), 'Deception')">Deception</button><br>
			<button id="rollHistory" onclick="rollSkill(MyCharacter.History(), 'History')">History</button><br>	
			<button id="rollInsight" onclick="rollSkill(MyCharacter.Insight(), 'Insight')">Insight</button><br>			
			<button id="rollIntimidation" onclick="rollSkill(MyCharacter.Intimidation(), 'Intimidation')">Intimidation</button><br>
			<button id="rollInvestigation" onclick="rollSkill(MyCharacter.Investigation(), 'Investigation')">Investigation</button><br>
			<button id="rollMedicine" onclick="rollSkill(MyCharacter.Medicine(), 'Medicine')">Medicine</button><br>
			<button id="rollNature" onclick="rollSkill(MyCharacter.Nature(), 'Nature')">Natureq</button><br>
			<button id="rollPerception" onclick="rollSkill(MyCharacter.Perception(), 'Perception')">Perception</button><br>
			<button id="rollPerformance" onclick="rollSkill(MyCharacter.Performance(), 'Performance')">Performance</button><br>
			<button id="rollPersuasion" onclick="rollSkill(MyCharacter.Persuasion(), 'Persuasion')">Persuasion</button><br>	
			<button id="rollReligion" onclick="rollSkill(MyCharacter.Religion(), 'Religion')">Religion</button><br>
			<button id="rollSleightOfHand" onclick="rollSkill(MyCharacter.SleightOfHand(), 'Sleight of Hand')">Sleight Of Hand</button><br>
			<button id="rollStealth" onclick="rollSkill(MyCharacter.Stealth(), 'Stealth')">Stealth</button><br>
			<button id="rollSurvival" onclick="rollSkill(MyCharacter.Survival(), 'Survival')">Survival</button><br>
		</div>
	</div>  
</div>



<div id="CharacterSheet" style="height:100%; width:300px; position:absolute; top:0px; left:75px; background-color:#BEC6DD; visibility:hidden;">
  <p>
	Please Input your character's stats.<br>
	If you are proficient in a skill, select the checkbox next to it.
	<hr>
	<input type="text" id="MyLevel" value="5" style="width: 30px">Character Level<br>	
	<hr>
	Input your character's core stats (not the +bonus)<br>
	<input type="text" id="MySTR" value="20" style="width: 30px"><input type="checkbox" id="STRProfCheck">STR<br>
	<input type="text" id="MyDEX" value="18" style="width: 30px"><input type="checkbox" id="DEXProfCheck">DEX<br>
	<input type="text" id="MyCON" value="16" style="width: 30px"><input type="checkbox" id="CONProfCheck">CON<br>
	<input type="text" id="MyINT" value="14" style="width: 30px"><input type="checkbox" id="INTProfCheck">INT<br>
	<input type="text" id="MyWIS" value="12" style="width: 30px"><input type="checkbox" id="WISProfCheck">WIS<br>
	<input type="text" id="MyCHA" value="10" style="width: 30px"><input type="checkbox" id="CHAProfCheck">CHA
	<hr>
	
	
	<input type="checkbox" id="AcrobaticsProfCheck">Acrobatics<br>
	<input type="checkbox" id="AnimalHandlingProfCheck">Animal Handling<br>
	<input type="checkbox" id="ArcanaProfCheck">Arcana<br>
	<input type="checkbox" id="AthleticsProfCheck">Athletics<br>
	<input type="checkbox" id="DeceptionProfCheck">Deception<br>
	<input type="checkbox" id="HistoryProfCheck">History<br>
	<input type="checkbox" id="InsightProfCheck">Insight<br>
	<input type="checkbox" id="IntimidationProfCheck">Intimidation<br>
	<input type="checkbox" id="InvestigationProfCheck">Investigation<br>
	<input type="checkbox" id="MedicineProfCheck">Medicine<br>
	<input type="checkbox" id="NatureProfCheck">Nature<br>
	<input type="checkbox" id="PerceptionProfCheck">Perception<br>
	<input type="checkbox" id="PerformanceProfCheck">Performance<br>
	<input type="checkbox" id="PersuasionProfCheck">Persuasion<br>
	<input type="checkbox" id="ReligionProfCheck">Religion<br>
	<input type="checkbox" id="SleightOfHandProfCheck">Sleight Of Hand<br>
	<input type="checkbox" id="StealthProfCheck">Stealth<br>
	<input type="checkbox" id="SurvivalProfCheck">Survival<hr>
	<button id="SubmitCharacterStats" onclick="SubmitCharacterStats()">Submit</button><br>
	
  </p>
</div>

<div id="CharacterStatsMenu" style="height:100%; width:100%; position:absolute; top:0px; left:75px; background-color:#BEC6DD; visibility:hidden;">
	<p id="CharacterStats"></p>
	<input type="text" id="SaveString" size="20"><button id="saveCharacter" onclick="saveCharacter()">Save</button><br>
	<button id="resetStats" onclick="resetStats()">Reset Stats</button>
</div>

<div id="Line1" style="height:100%; width:5px; background-color:#000000; position:absolute; top:0px; left:375px;">
</div>



<div id="ResultListButtons" style="height:30px; width:100%; background-color:#BEC6DD; position:absolute; top:0px; left:380px;">
		<input type="checkbox" id="PrivateRoll">Private<button id="clearChatButton" onclick="clearChat()">Clear Chat</button><br>
</div>

<div id="ResultListMain" style="height:100%; width:100%; background-color:#BEC6DD; padding:5px; position:absolute; top:30px; left:380px; overflow: auto;">
		Result List Here
</div>


</body></html>
